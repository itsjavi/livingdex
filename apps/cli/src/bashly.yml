name: livingdex
help: Livingdex Command-Line tool
version: 0.1.0

environment_variables:
  - name: APPS_DIR
    required: true
  - name: SCRIPTS_DIR
    required: true
  - name: SOURCES_DIR
    required: true
  - name: RESOURCES_DIR
    required: true
  - name: DIST_DIR
    required: true

commands:
  - name: info
    help: Shows system info

  - name: build
    help: Builds the entire project (DB, assets and UI)
    examples:
      - ./livingdex build

  - name: install
    help: Installs project dependencies
    examples:
      - ./livingdex install

  - name: update
    help: Updates (and upgrades) project dependencies
    examples:
      - ./livingdex update

  - name: clear
    help: Clears cache, dist and other generated files
    flags:
      - long: --db
        help: When specified, it recreated the DB in an empty state
    examples:
      - ./livingdex clear

  - name: deploy
    help: Deploys the current state of the UI build into gh-pages
    examples:
      - ./livingdex deploy

  - name: table-export
    help: Exports an entire table from DB to JSON or CSV
    args:
      - name: table
        required: true
        help: table name to export (it should have an id column)
    flags:
      - long: --format
        short: -f
        arg: format
        help: Format to export to
        allows: [ "json", "csv" ]
        default: json
    examples:
      - ./livingdex table-export pokemon --format=json > pokemon-data.json
      - ./livingdex table-export move -fcsv > moves-data.csv

  - name: query
    short: q
    help: Queries the db DB and returns the results in JSON format
    args:
      - name: sql
        required: true
        help: SQL SELECT statement
    examples:
      - ./livingdex query "SELECT * FROM pokemon"
      - ./livingdex q "SELECT * FROM pokemon"

  - name: megadl
    help: Downloads a file from mega.nz (requires old file URL format)
    args:
      - name: url
        required: true
        help: mega file url
      - name: dest
        required: true
        help: destination file name
    examples:
      - ./livingdex megadl 'https://mega.nz/#!R08m3BCZ!J2vTgAKP_3qEG9bCqnbca9PQ50LFyGlrMevEQD9QnZY' renders.zip
